{
  "rules": {
    "users" : {
      "$id" : {
        ".read": "auth != null && $id === auth.uid",
        ".write": "auth != null && $id === auth.uid",

        "contacts": { ".validate": true },
        "feedbackSessions": { ".validate": true }
      }
    },

    "feedbackSessions": {
      "$id": {
        ".read": "auth != null && data.child('ownerId').val() === auth.uid",
        ".write": "auth != null && ((data.exists() && data.child('ownerId').val() === auth.uid) || (!data.exists() && newData.child('ownerId').val() === auth.uid))",

        "ownerId": { ".validate": true },
        "status": { ".validate": true },
        "name": {".validate": true },
        "feedbackSessionRequests": { ".validate": true },

        "$other": { ".validate": false }
      }
    },

    "feedbackSessionRequests": {
      "$id": {
        ".read": "true",
        ".write": "auth != null && root.child('feedbackSessions').child(newData.child('sessionId').val()).child('ownerId').val() === auth.uid",

        "sessionId": { ".validate": true },
        "sessionName": { ".validate": true },
        "sessionOwnerName": { ".validate":  true },
        "sessionOwnerEmail": { ".validate":  true },
        "requesteeName": { ".validate": true },
        "requesteeEmail": { ".validate": true },

        "participants": { ".validate": true },
        "requestedPairs": { ".validate": true, ".write": "true" },
        "finalizedPairs": { ".validate": true },
        "finalized": { ".validate": true },

        "$other": { ".validate": false }
      }
    }
  }
}